<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Octeon PCI Driver: cvm-drv-reqresp.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>cvm-drv-reqresp.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Core Driver: PCI instruction response routines. 
<p>

<p>
Definition in file <a class="el" href="cvm-drv-reqresp_8h-source.html">cvm-drv-reqresp.h</a>.
<p>

<p>
<a href="cvm-drv-reqresp_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-drv-reqresp_8h.html#6a1ef62ba7488ba45d910a1087b3e418">cvm_drv_send_scatter_response</a> (<a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a> action, cvmx_wqe_t *wqe, <a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> *resp, cvmx_buf_ptr_t lptr, uint32_t local_segs, <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a> ptr_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: This routine is called to post a response to a PCI instruction when the response will be sent to multiple host buffers.  <a href="#6a1ef62ba7488ba45d910a1087b3e418"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-drv-reqresp_8h.html#b3dc5d26496cd299a88b581f082450cc">cvm_drv_send_scatter_response_direct</a> (<a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a> action, cvmx_wqe_t *wqe, <a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> *resp, cvmx_buf_ptr_t lptr, uint32_t local_segs, <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a> ptr_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: This routine is called to post a response to a PCI instruction when the response will be sent to multiple host buffers.  <a href="#b3dc5d26496cd299a88b581f082450cc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-drv-reqresp_8h.html#1f0091c0548963ced404329a7ec39084">cvm_drv_read_scatter_list</a> (<a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a> action, uint64_t host_hw_addr, <a class="el" href="structcvmx__raw__inst__front__t.html">cvmx_raw_inst_front_t</a> *front, <a class="el" href="structocteon__sg__entry__t.html">octeon_sg_entry_t</a> *sptr, cvmx_wqe_t *wqe)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Read a scatter list from the host memory.  <a href="#1f0091c0548963ced404329a7ec39084"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-drv-reqresp_8h.html#09b04b4ec27595fc3cca9c7f7f929cc5">cvm_drv_pci_instr_response_direct</a> (<a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a> action, <a class="el" href="structcvmx__raw__inst__front__t.html">cvmx_raw_inst_front_t</a> *front, cvmx_buf_ptr_t lptr, uint32_t segs, <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a> ptr_type, cvmx_wqe_t *wqe)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: This routine is called to post a response to a PCI instruction when the response will be sent to a single host buffer.  <a href="#09b04b4ec27595fc3cca9c7f7f929cc5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-drv-reqresp_8h.html#1c7a3963410a0b2c3ef012fb76a0eb0a">cvm_drv_pci_instr_response</a> (<a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a> action, <a class="el" href="structcvmx__raw__inst__front__t.html">cvmx_raw_inst_front_t</a> *front, <a class="el" href="unioncvmx__resp__hdr__t.html">cvmx_resp_hdr_t</a> *orh, uint64_t status, cvmx_buf_ptr_t lptr, uint32_t segs, <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a> ptr_type, cvmx_wqe_t *wqe)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: This routine is called to post a response to a PCI instruction when the response will be sent to a single host buffer.  <a href="#1c7a3963410a0b2c3ef012fb76a0eb0a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-drv-reqresp_8h.html#2cccd6a8e87bad2c7ef08e691ec5d17b">cvm_dma_send_scatter_response_direct</a> (<a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a> action, cvmx_wqe_t *wqe, <a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> *resp, cvmx_buf_ptr_t lptr, uint32_t local_segs, <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a> ptr_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: <a class="el" href="cvm-drv-reqresp_8h.html#2cccd6a8e87bad2c7ef08e691ec5d17b">cvm_dma_send_scatter_response_direct()</a> existed in older releases and may be removed from future releases.  <a href="#2cccd6a8e87bad2c7ef08e691ec5d17b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-drv-reqresp_8h.html#a39d8274ebc2aa1f7772f542f7b8dce3">cvm_dma_send_scatter_response</a> (<a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a> action, cvmx_wqe_t *wqe, <a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> *resp, cvmx_buf_ptr_t lptr, uint32_t local_segs, <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a> ptr_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: <a class="el" href="cvm-drv-reqresp_8h.html#a39d8274ebc2aa1f7772f542f7b8dce3">cvm_dma_send_scatter_response()</a> existed in older releases and may be removed from future releases.  <a href="#a39d8274ebc2aa1f7772f542f7b8dce3"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a39d8274ebc2aa1f7772f542f7b8dce3"></a><!-- doxytag: member="cvm-drv-reqresp.h::cvm_dma_send_scatter_response" ref="a39d8274ebc2aa1f7772f542f7b8dce3" args="(DMA_ACTION action, cvmx_wqe_t *wqe, cvm_pci_scatter_resp_t *resp, cvmx_buf_ptr_t lptr, uint32_t local_segs, cvm_ptr_type_t ptr_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvm_dma_send_scatter_response           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a>&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_wqe_t *&nbsp;</td>
          <td class="paramname"> <em>wqe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> *&nbsp;</td>
          <td class="paramname"> <em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_buf_ptr_t&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>local_segs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a>&nbsp;</td>
          <td class="paramname"> <em>ptr_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: <a class="el" href="cvm-drv-reqresp_8h.html#a39d8274ebc2aa1f7772f542f7b8dce3">cvm_dma_send_scatter_response()</a> existed in older releases and may be removed from future releases. 
<p>
The new function <a class="el" href="cvm-drv-reqresp_8h.html#6a1ef62ba7488ba45d910a1087b3e418">cvm_drv_send_scatter_response()</a> uses the uniform naming convention used for all core driver API. 
<p>
Definition at line <a class="el" href="cvm-drv-reqresp_8h-source.html#l00191">191</a> of file <a class="el" href="cvm-drv-reqresp_8h-source.html">cvm-drv-reqresp.h</a>.
<p>
References <a class="el" href="cvm-drv-reqresp_8h.html#6a1ef62ba7488ba45d910a1087b3e418">cvm_drv_send_scatter_response()</a>.
</div>
</div><p>
<a class="anchor" name="2cccd6a8e87bad2c7ef08e691ec5d17b"></a><!-- doxytag: member="cvm-drv-reqresp.h::cvm_dma_send_scatter_response_direct" ref="2cccd6a8e87bad2c7ef08e691ec5d17b" args="(DMA_ACTION action, cvmx_wqe_t *wqe, cvm_pci_scatter_resp_t *resp, cvmx_buf_ptr_t lptr, uint32_t local_segs, cvm_ptr_type_t ptr_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvm_dma_send_scatter_response_direct           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a>&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_wqe_t *&nbsp;</td>
          <td class="paramname"> <em>wqe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> *&nbsp;</td>
          <td class="paramname"> <em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_buf_ptr_t&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>local_segs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a>&nbsp;</td>
          <td class="paramname"> <em>ptr_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: <a class="el" href="cvm-drv-reqresp_8h.html#2cccd6a8e87bad2c7ef08e691ec5d17b">cvm_dma_send_scatter_response_direct()</a> existed in older releases and may be removed from future releases. 
<p>
The new function <a class="el" href="cvm-drv-reqresp_8h.html#b3dc5d26496cd299a88b581f082450cc">cvm_drv_send_scatter_response_direct()</a> uses the uniform naming convention used for all core driver API. 
<p>
Definition at line <a class="el" href="cvm-drv-reqresp_8h-source.html#l00174">174</a> of file <a class="el" href="cvm-drv-reqresp_8h-source.html">cvm-drv-reqresp.h</a>.
<p>
References <a class="el" href="cvm-drv-reqresp_8h.html#b3dc5d26496cd299a88b581f082450cc">cvm_drv_send_scatter_response_direct()</a>.
</div>
</div><p>
<a class="anchor" name="1c7a3963410a0b2c3ef012fb76a0eb0a"></a><!-- doxytag: member="cvm-drv-reqresp.h::cvm_drv_pci_instr_response" ref="1c7a3963410a0b2c3ef012fb76a0eb0a" args="(DMA_ACTION action, cvmx_raw_inst_front_t *front, cvmx_resp_hdr_t *orh, uint64_t status, cvmx_buf_ptr_t lptr, uint32_t segs, cvm_ptr_type_t ptr_type, cvmx_wqe_t *wqe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_drv_pci_instr_response           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a>&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvmx__raw__inst__front__t.html">cvmx_raw_inst_front_t</a> *&nbsp;</td>
          <td class="paramname"> <em>front</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvmx__resp__hdr__t.html">cvmx_resp_hdr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>orh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_buf_ptr_t&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>segs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a>&nbsp;</td>
          <td class="paramname"> <em>ptr_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_wqe_t *&nbsp;</td>
          <td class="paramname"> <em>wqe</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: This routine is called to post a response to a PCI instruction when the response will be sent to a single host buffer. 
<p>
The response header, status of instruction processing, the response data and pointer to the raw instruction for which the response is being sent are passed as params. The function can be called in blocking/non-blocking mode. For non-blocking mode, it takes a pointer to a work queue entry which is scheduled in the POW when the DMA completes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>action</em>&nbsp;</td><td>- specify DMA_BLOCKING/DMA_NON_BLOCKING </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>front</em>&nbsp;</td><td>- the RAW instruction from where the return address and IRH are read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>orh</em>&nbsp;</td><td>- The response header. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>- status of instruction processing. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lptr</em>&nbsp;</td><td>- the local pointer to response data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>segs</em>&nbsp;</td><td>- number of local data segments in response data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr_type</em>&nbsp;</td><td>- type of pointer for "lptr" (DIRECT/LINKED/GATHER) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wqe</em>&nbsp;</td><td>- For non-blocking mode, a pointer to a work queue entry is passed here.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success: 0; Failure: -ENOMEM, -EINVAL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="09b04b4ec27595fc3cca9c7f7f929cc5"></a><!-- doxytag: member="cvm-drv-reqresp.h::cvm_drv_pci_instr_response_direct" ref="09b04b4ec27595fc3cca9c7f7f929cc5" args="(DMA_ACTION action, cvmx_raw_inst_front_t *front, cvmx_buf_ptr_t lptr, uint32_t segs, cvm_ptr_type_t ptr_type, cvmx_wqe_t *wqe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_drv_pci_instr_response_direct           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a>&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvmx__raw__inst__front__t.html">cvmx_raw_inst_front_t</a> *&nbsp;</td>
          <td class="paramname"> <em>front</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_buf_ptr_t&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>segs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a>&nbsp;</td>
          <td class="paramname"> <em>ptr_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_wqe_t *&nbsp;</td>
          <td class="paramname"> <em>wqe</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: This routine is called to post a response to a PCI instruction when the response will be sent to a single host buffer. 
<p>
The response data and pointer to the raw instruction for which the response is being sent are passed as params. The response header &amp; status of instruction processing are assumed to be part of the response data. The function can be called in blocking/non-blocking mode. For non-blocking mode, it takes a pointer to a work queue entry which is scheduled in the POW when the DMA completes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>action</em>&nbsp;</td><td>- specify DMA_BLOCKING/DMA_NON_BLOCKING </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>front</em>&nbsp;</td><td>- the RAW instruction from where the return address and IRH are read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lptr</em>&nbsp;</td><td>- the local pointer to response data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>segs</em>&nbsp;</td><td>- number of local data segments in response data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr_type</em>&nbsp;</td><td>- type of pointer for "lptr" (DIRECT/LINKED/GATHER) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wqe</em>&nbsp;</td><td>- For non-blocking mode, a pointer to a work queue entry is passed here.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success: 0; Failure: -ENOMEM, -EINVAL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="1f0091c0548963ced404329a7ec39084"></a><!-- doxytag: member="cvm-drv-reqresp.h::cvm_drv_read_scatter_list" ref="1f0091c0548963ced404329a7ec39084" args="(DMA_ACTION action, uint64_t host_hw_addr, cvmx_raw_inst_front_t *front, octeon_sg_entry_t *sptr, cvmx_wqe_t *wqe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_drv_read_scatter_list           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a>&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>host_hw_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvmx__raw__inst__front__t.html">cvmx_raw_inst_front_t</a> *&nbsp;</td>
          <td class="paramname"> <em>front</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structocteon__sg__entry__t.html">octeon_sg_entry_t</a> *&nbsp;</td>
          <td class="paramname"> <em>sptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_wqe_t *&nbsp;</td>
          <td class="paramname"> <em>wqe</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: Read a scatter list from the host memory. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>action</em>&nbsp;</td><td>- specify DMA_BLOCKING/DMA_NON_BLOCKING </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>host_hw_addr</em>&nbsp;</td><td>- Host memory address of scatter list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>front</em>&nbsp;</td><td>- pointer to the PCI instruction. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sptr</em>&nbsp;</td><td>- address of local buffer to read in the scatter list. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wqe</em>&nbsp;</td><td>- For non-blocking mode, a pointer to a work queue entry is passed here. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success:0 Failure: non-zero error value </dd></dl>

</div>
</div><p>
<a class="anchor" name="6a1ef62ba7488ba45d910a1087b3e418"></a><!-- doxytag: member="cvm-drv-reqresp.h::cvm_drv_send_scatter_response" ref="6a1ef62ba7488ba45d910a1087b3e418" args="(DMA_ACTION action, cvmx_wqe_t *wqe, cvm_pci_scatter_resp_t *resp, cvmx_buf_ptr_t lptr, uint32_t local_segs, cvm_ptr_type_t ptr_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_drv_send_scatter_response           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a>&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_wqe_t *&nbsp;</td>
          <td class="paramname"> <em>wqe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> *&nbsp;</td>
          <td class="paramname"> <em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_buf_ptr_t&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>local_segs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a>&nbsp;</td>
          <td class="paramname"> <em>ptr_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: This routine is called to post a response to a PCI instruction when the response will be sent to multiple host buffers. 
<p>
In other words, for scatter mode responses, use this API. The response header (ORH), status of instruction processing, the scatter list containing the host buffer addresses are passed to this function in a <a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> structure. The response data and pointer to the raw instruction for which the response is being sent are passed as params. The function can be called in blocking/non-blocking mode. For non-blocking mode, it takes a pointer to a work queue entry which is scheduled in the POW when the DMA completes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>action</em>&nbsp;</td><td>- specify DMA_BLOCKING/DMA_NON_BLOCKING </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wqe</em>&nbsp;</td><td>- For non-blocking mode, a pointer to a work queue entry is passed here. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>resp</em>&nbsp;</td><td>- pointer to a <a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> structure which contains the scatter list, status &amp; response header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lptr</em>&nbsp;</td><td>- the local pointer to response data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>local_segs</em>&nbsp;</td><td>- number of local data segments in response data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr_type</em>&nbsp;</td><td>- type of pointer for "lptr" (DIRECT/LINKED/GATHER)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success: 0; Failure: -ENOMEM, -EINVAL. </dd></dl>

<p>
Referenced by <a class="el" href="cvm-drv-reqresp_8h-source.html#l00191">cvm_dma_send_scatter_response()</a>.
</div>
</div><p>
<a class="anchor" name="b3dc5d26496cd299a88b581f082450cc"></a><!-- doxytag: member="cvm-drv-reqresp.h::cvm_drv_send_scatter_response_direct" ref="b3dc5d26496cd299a88b581f082450cc" args="(DMA_ACTION action, cvmx_wqe_t *wqe, cvm_pci_scatter_resp_t *resp, cvmx_buf_ptr_t lptr, uint32_t local_segs, cvm_ptr_type_t ptr_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_drv_send_scatter_response_direct           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a>&nbsp;</td>
          <td class="paramname"> <em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_wqe_t *&nbsp;</td>
          <td class="paramname"> <em>wqe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> *&nbsp;</td>
          <td class="paramname"> <em>resp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_buf_ptr_t&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>local_segs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a>&nbsp;</td>
          <td class="paramname"> <em>ptr_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: This routine is called to post a response to a PCI instruction when the response will be sent to multiple host buffers. 
<p>
In other words, for scatter mode responses, use this API. The response header (ORH) and status of instruction processing are assumed to be part of the response data passed to this function. The scatter list containing the host buffer addresses are passed to this function in a <a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> structure. The response data and pointer to the raw instruction for which the response is being sent are passed as params. The function can be called in blocking/non-blocking mode. For non-blocking mode, it takes a pointer to a work queue entry which is scheduled in the POW when the DMA completes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>action</em>&nbsp;</td><td>- specify DMA_BLOCKING/DMA_NON_BLOCKING </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wqe</em>&nbsp;</td><td>- For non-blocking mode, a pointer to a work queue entry is passed here. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>resp</em>&nbsp;</td><td>- pointer to a <a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a> structure which contains the scatter list. The status &amp; orh fields are ignored her. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lptr</em>&nbsp;</td><td>- the local pointer to response data which includes the response header (first 8 bytes) and status (last 8 bytes). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>local_segs</em>&nbsp;</td><td>- number of local data segments in response data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr_type</em>&nbsp;</td><td>- type of pointer for "lptr" (DIRECT/LINKED/GATHER)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success: 0; Failure: -ENOMEM, -EINVAL. </dd></dl>

<p>
Referenced by <a class="el" href="cvm-drv-reqresp_8h-source.html#l00174">cvm_dma_send_scatter_response_direct()</a>.
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue Nov 22 15:40:59 2011 for Octeon PCI Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
