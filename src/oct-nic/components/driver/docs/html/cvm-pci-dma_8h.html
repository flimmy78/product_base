<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Octeon PCI Driver: cvm-pci-dma.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>cvm-pci-dma.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Core Driver: Structures and routines for PCI DMA queue management. 
<p>

<p>
Definition in file <a class="el" href="cvm-pci-dma_8h-source.html">cvm-pci-dma.h</a>.
<p>

<p>
<a href="cvm-pci-dma_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__oct__pci__dma__inst__hdr__t.html">cvmx_oct_pci_dma_inst_hdr_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Hardware defined 64-bit PCI DMA command structure.  <a href="unioncvmx__oct__pci__dma__inst__hdr__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__oct__pci__dma__local__ptr__t.html">cvmx_oct_pci_dma_local_ptr_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Hardware defined 64-bit PCI DMA local buffer format.  <a href="unioncvmx__oct__pci__dma__local__ptr__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvm__pci__dma__cmd__t.html">cvm_pci_dma_cmd_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Information about PCI DMA operation.  <a href="unioncvm__pci__dma__cmd__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcvm__pci__scatter__resp__t.html">cvm_pci_scatter_resp_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Scatter response information This structure is passed by application when calling a scatter response API.  <a href="structcvm__pci__scatter__resp__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvm__dma__remote__len__t.html">cvm_dma_remote_len_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Format for size of remote data buffer in a PCI DMA component.  <a href="unioncvm__dma__remote__len__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvm__dma__remote__ptr__t.html">cvm_dma_remote_ptr_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Address of the host machine are presented to PCI DMA routines in this format.  <a href="unioncvm__dma__remote__ptr__t.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#dc37acbe563e2f012337dc5c8f1dc0a0">CVMX_DMA_QUEUE_TYPE</a> { <br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#dc37acbe563e2f012337dc5c8f1dc0a0c9f22b0605df0432c34b811e731e9c75">CVMX_DMA_QUEUE0</a> =  0, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#dc37acbe563e2f012337dc5c8f1dc0a07aec5a2698cbd970b98b351fceb427fa">CVMX_DMA_QUEUE1</a> =  1, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#dc37acbe563e2f012337dc5c8f1dc0a033d540ad9a22da075fedbd2db1156cb0">CVMX_DMA_QUEUE2</a> =  2, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#dc37acbe563e2f012337dc5c8f1dc0a027b1f248f87e912bf44794032277f632">CVMX_DMA_QUEUE3</a> =  3, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#dc37acbe563e2f012337dc5c8f1dc0a0e8b7323a74f0d7c62965c8c4ec634529">CVMX_DMA_QUEUE4</a> =  4
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9e">oct_pci_dma_flags_t</a> { <br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9ee157643cc3926dae736c7000e146b340">PCI_DMA_OUTBOUND</a> =  0, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9e08a9f3781491acd9575a967cb9989f2e">PCI_DMA_INBOUND</a> =  1, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9e93a658390371e94b9c075dc20f2e0cfb">PCI_DMA_EXTERNAL</a> =  2, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9ed86f1561672f4fe1959e7209fe5d291d">PCI_DMA_INTERNAL</a> =  3, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9edc8273cf6e2e3adf7e0673775aaaa28d">PCI_DMA_CNTRADD</a> =  4, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9e98b428007ff810070cb29932e9011470">PCI_DMA_FORCEINT</a> =  8, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9e44abc7b28e2d13223e4b9e7961911fbb">PCI_DMA_IGNOREI</a> =  16, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9ec73c033387be34671516d52f94459012">PCI_DMA_FREELOCAL</a> =  32, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9e2b1bdde43c6db39a837f858710893e3d">PCI_DMA_PUTWQE</a> =  64
<br>
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a> { <br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab55a512a51308265105cf71b3574589dcd">DMA_BLOCKING</a> =  1, 
<br>
&nbsp;&nbsp;<a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5eaa393fba625af8d9a0832d70f8c3769">DMA_NON_BLOCKING</a> =  2
<br>
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#bdb7e5a397efb3d22d7a0e16b367ce88">cvm_pci_dma_remove_from_tracker_list</a> (cvmx_wqe_t *wqe)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#fc26a651709e499dc0fe7e390dddad81">cvm_pci_dma_dump_tracker_list</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#eba5f7c4feaec154f1ba4594ac622e50">cvm_dma_fill_local_ptrs</a> (<a class="el" href="unioncvmx__oct__pci__dma__local__ptr__t.html">cvmx_oct_pci_dma_local_ptr_t</a> *local_ptr, cvmx_buf_ptr_t lptr, uint32_t segs, <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a> ptr_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Routine to fill the PCI DMA instruction local pointers.  <a href="#eba5f7c4feaec154f1ba4594ac622e50"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#5ff9888036a38704dea0eabe5bca7119">cvm_dma_queue_init</a> (<a class="el" href="structcvm__oct__dev__t.html">cvm_oct_dev_t</a> *oct)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Initialize a PCI DMA instruction chunk.  <a href="#5ff9888036a38704dea0eabe5bca7119"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#5c0b66f728ba7b188b56ffcf17ac96b8">cvm_pci_dma_raw</a> (<a class="el" href="unioncvmx__oct__pci__dma__inst__hdr__t.html">cvmx_oct_pci_dma_inst_hdr_t</a> *dma_hdr, <a class="el" href="unioncvmx__oct__pci__dma__local__ptr__t.html">cvmx_oct_pci_dma_local_ptr_t</a> *lptr, <a class="el" href="unioncvm__dma__remote__ptr__t.html">cvm_dma_remote_ptr_t</a> *rptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: This routines creates a PCI DMA instruction based on information in the DMA header and local and remote pointers and buffer sizes passed to it.  <a href="#5c0b66f728ba7b188b56ffcf17ac96b8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#15a10874918a536205a8fa633b4037ec">cvm_pcie_dma_raw</a> (int q_no, <a class="el" href="unioncvmx__oct__pci__dma__inst__hdr__t.html">cvmx_oct_pci_dma_inst_hdr_t</a> *dma_hdr, void *firstptrs, void *lastptrs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: This routines creates a PCI DMA instruction based on information in the DMA header and local and remote pointers and buffer sizes passed to it.  <a href="#15a10874918a536205a8fa633b4037ec"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#aedebf9d4cf969e2f017e822461a44e0">cvm_pci_dma_send_data</a> (<a class="el" href="unioncvm__pci__dma__cmd__t.html">cvm_pci_dma_cmd_t</a> *cmd, cvmx_buf_ptr_t *lptr, <a class="el" href="unioncvm__dma__remote__ptr__t.html">cvm_dma_remote_ptr_t</a> *rptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Write data to host or PCI-Express memory using Octeon PCI DMA engine.  <a href="#aedebf9d4cf969e2f017e822461a44e0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#4ebbf8a86fefe0238ae2a57c830cf09d">cvm_pci_dma_recv_data</a> (<a class="el" href="unioncvm__pci__dma__cmd__t.html">cvm_pci_dma_cmd_t</a> *cmd, cvmx_buf_ptr_t *lptr, <a class="el" href="unioncvm__dma__remote__ptr__t.html">cvm_dma_remote_ptr_t</a> *rptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Read data from host or PCI-Express memory using Octeon PCI DMA engine.  <a href="#4ebbf8a86fefe0238ae2a57c830cf09d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structcvm__dma__comp__ptr__t.html">cvm_dma_comp_ptr_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#af1a8951b180e97d8157d6c1d2032359">cvm_get_dma_comp_ptr</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Function to get a completion pointer from core driver pool.  <a href="#af1a8951b180e97d8157d6c1d2032359"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#8c8ff553e3374fda08d688617be3dfb2">cvm_release_dma_comp_ptr</a> (<a class="el" href="structcvm__dma__comp__ptr__t.html">cvm_dma_comp_ptr_t</a> *ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Function to free completion pointer to core driver pool.  <a href="#8c8ff553e3374fda08d688617be3dfb2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#06a3a35352277e1f4735eea19d79c1a1">cvm_pci_dma_send_direct</a> (<a class="el" href="unioncvmx__oct__pci__dma__inst__hdr__t.html">cvmx_oct_pci_dma_inst_hdr_t</a> *dma_hdr, <a class="el" href="unioncvmx__oct__pci__dma__local__ptr__t.html">cvmx_oct_pci_dma_local_ptr_t</a> *lptr, <a class="el" href="unioncvm__dma__remote__ptr__t.html">cvm_dma_remote_ptr_t</a> *rptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Core: Wrapper around the <a class="el" href="cvm-pci-dma_8h.html#5c0b66f728ba7b188b56ffcf17ac96b8">cvm_pci_dma_raw()</a> function.  <a href="#06a3a35352277e1f4735eea19d79c1a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#3d36a54b739a25ba6ab69505dd501b47">cn56xx_setup_dma_intr_threshold</a> (int q_no)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#44270257fe34f9e7490e249a3c2cb8cc">cvm_pci_dma_print_header</a> (<a class="el" href="unioncvmx__oct__pci__dma__inst__hdr__t.html">cvmx_oct_pci_dma_inst_hdr_t</a> *dmahdr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvm-pci-dma_8h.html#d4012d9761bbf54415803f7de1db32e0">cvm_drv_debug_print_dmaq</a> (int q_no)</td></tr>

</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="dc37acbe563e2f012337dc5c8f1dc0a0"></a><!-- doxytag: member="cvm-pci-dma.h::CVMX_DMA_QUEUE_TYPE" ref="dc37acbe563e2f012337dc5c8f1dc0a0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cvm-pci-dma_8h.html#dc37acbe563e2f012337dc5c8f1dc0a0">CVMX_DMA_QUEUE_TYPE</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="dc37acbe563e2f012337dc5c8f1dc0a0c9f22b0605df0432c34b811e731e9c75"></a><!-- doxytag: member="CVMX_DMA_QUEUE0" ref="dc37acbe563e2f012337dc5c8f1dc0a0c9f22b0605df0432c34b811e731e9c75" args="" -->CVMX_DMA_QUEUE0</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="dc37acbe563e2f012337dc5c8f1dc0a07aec5a2698cbd970b98b351fceb427fa"></a><!-- doxytag: member="CVMX_DMA_QUEUE1" ref="dc37acbe563e2f012337dc5c8f1dc0a07aec5a2698cbd970b98b351fceb427fa" args="" -->CVMX_DMA_QUEUE1</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="dc37acbe563e2f012337dc5c8f1dc0a033d540ad9a22da075fedbd2db1156cb0"></a><!-- doxytag: member="CVMX_DMA_QUEUE2" ref="dc37acbe563e2f012337dc5c8f1dc0a033d540ad9a22da075fedbd2db1156cb0" args="" -->CVMX_DMA_QUEUE2</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="dc37acbe563e2f012337dc5c8f1dc0a027b1f248f87e912bf44794032277f632"></a><!-- doxytag: member="CVMX_DMA_QUEUE3" ref="dc37acbe563e2f012337dc5c8f1dc0a027b1f248f87e912bf44794032277f632" args="" -->CVMX_DMA_QUEUE3</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="dc37acbe563e2f012337dc5c8f1dc0a0e8b7323a74f0d7c62965c8c4ec634529"></a><!-- doxytag: member="CVMX_DMA_QUEUE4" ref="dc37acbe563e2f012337dc5c8f1dc0a0e8b7323a74f0d7c62965c8c4ec634529" args="" -->CVMX_DMA_QUEUE4</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="cvm-pci-dma_8h-source.html#l00034">34</a> of file <a class="el" href="cvm-pci-dma_8h-source.html">cvm-pci-dma.h</a>.
</div>
</div><p>
<a class="anchor" name="7a8280fb2af8dce1b95783d51dfc6ab5"></a><!-- doxytag: member="cvm-pci-dma.h::DMA_ACTION" ref="7a8280fb2af8dce1b95783d51dfc6ab5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cvm-pci-dma_8h.html#7a8280fb2af8dce1b95783d51dfc6ab5">DMA_ACTION</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="7a8280fb2af8dce1b95783d51dfc6ab55a512a51308265105cf71b3574589dcd"></a><!-- doxytag: member="DMA_BLOCKING" ref="7a8280fb2af8dce1b95783d51dfc6ab55a512a51308265105cf71b3574589dcd" args="" -->DMA_BLOCKING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="7a8280fb2af8dce1b95783d51dfc6ab5eaa393fba625af8d9a0832d70f8c3769"></a><!-- doxytag: member="DMA_NON_BLOCKING" ref="7a8280fb2af8dce1b95783d51dfc6ab5eaa393fba625af8d9a0832d70f8c3769" args="" -->DMA_NON_BLOCKING</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="cvm-pci-dma_8h-source.html#l00114">114</a> of file <a class="el" href="cvm-pci-dma_8h-source.html">cvm-pci-dma.h</a>.
</div>
</div><p>
<a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9e"></a><!-- doxytag: member="cvm-pci-dma.h::oct_pci_dma_flags_t" ref="9c55479597ea58ab1b6d3b74c8edfd9e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cvm-pci-dma_8h.html#9c55479597ea58ab1b6d3b74c8edfd9e">oct_pci_dma_flags_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9ee157643cc3926dae736c7000e146b340"></a><!-- doxytag: member="PCI_DMA_OUTBOUND" ref="9c55479597ea58ab1b6d3b74c8edfd9ee157643cc3926dae736c7000e146b340" args="" -->PCI_DMA_OUTBOUND</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9e08a9f3781491acd9575a967cb9989f2e"></a><!-- doxytag: member="PCI_DMA_INBOUND" ref="9c55479597ea58ab1b6d3b74c8edfd9e08a9f3781491acd9575a967cb9989f2e" args="" -->PCI_DMA_INBOUND</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9e93a658390371e94b9c075dc20f2e0cfb"></a><!-- doxytag: member="PCI_DMA_EXTERNAL" ref="9c55479597ea58ab1b6d3b74c8edfd9e93a658390371e94b9c075dc20f2e0cfb" args="" -->PCI_DMA_EXTERNAL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9ed86f1561672f4fe1959e7209fe5d291d"></a><!-- doxytag: member="PCI_DMA_INTERNAL" ref="9c55479597ea58ab1b6d3b74c8edfd9ed86f1561672f4fe1959e7209fe5d291d" args="" -->PCI_DMA_INTERNAL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9edc8273cf6e2e3adf7e0673775aaaa28d"></a><!-- doxytag: member="PCI_DMA_CNTRADD" ref="9c55479597ea58ab1b6d3b74c8edfd9edc8273cf6e2e3adf7e0673775aaaa28d" args="" -->PCI_DMA_CNTRADD</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9e98b428007ff810070cb29932e9011470"></a><!-- doxytag: member="PCI_DMA_FORCEINT" ref="9c55479597ea58ab1b6d3b74c8edfd9e98b428007ff810070cb29932e9011470" args="" -->PCI_DMA_FORCEINT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9e44abc7b28e2d13223e4b9e7961911fbb"></a><!-- doxytag: member="PCI_DMA_IGNOREI" ref="9c55479597ea58ab1b6d3b74c8edfd9e44abc7b28e2d13223e4b9e7961911fbb" args="" -->PCI_DMA_IGNOREI</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9ec73c033387be34671516d52f94459012"></a><!-- doxytag: member="PCI_DMA_FREELOCAL" ref="9c55479597ea58ab1b6d3b74c8edfd9ec73c033387be34671516d52f94459012" args="" -->PCI_DMA_FREELOCAL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="9c55479597ea58ab1b6d3b74c8edfd9e2b1bdde43c6db39a837f858710893e3d"></a><!-- doxytag: member="PCI_DMA_PUTWQE" ref="9c55479597ea58ab1b6d3b74c8edfd9e2b1bdde43c6db39a837f858710893e3d" args="" -->PCI_DMA_PUTWQE</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="cvm-pci-dma_8h-source.html#l00080">80</a> of file <a class="el" href="cvm-pci-dma_8h-source.html">cvm-pci-dma.h</a>.
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="3d36a54b739a25ba6ab69505dd501b47"></a><!-- doxytag: member="cvm-pci-dma.h::cn56xx_setup_dma_intr_threshold" ref="3d36a54b739a25ba6ab69505dd501b47" args="(int q_no)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cn56xx_setup_dma_intr_threshold           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>q_no</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="eba5f7c4feaec154f1ba4594ac622e50"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_dma_fill_local_ptrs" ref="eba5f7c4feaec154f1ba4594ac622e50" args="(cvmx_oct_pci_dma_local_ptr_t *local_ptr, cvmx_buf_ptr_t lptr, uint32_t segs, cvm_ptr_type_t ptr_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvm_dma_fill_local_ptrs           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unioncvmx__oct__pci__dma__local__ptr__t.html">cvmx_oct_pci_dma_local_ptr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>local_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_buf_ptr_t&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>segs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203">cvm_ptr_type_t</a>&nbsp;</td>
          <td class="paramname"> <em>ptr_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: Routine to fill the PCI DMA instruction local pointers. 
<p>
This routines translates LINKED, DIRECT and GATHER mode pointers to a list of local pointers as required by the PCI DMA engine. Applications that require calling a direct PCI DMA API like <a class="el" href="cvm-pci-dma_8h.html#5c0b66f728ba7b188b56ffcf17ac96b8">cvm_pci_dma_raw()</a> should call this function to prepare the local pointer list.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>local_ptr,:</em>&nbsp;</td><td>Local pointer list to be passed to DMA instruction </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lptr</em>&nbsp;</td><td>: Local pointer list (linked/gather) available with app. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>segs</em>&nbsp;</td><td>: Number of local pointers. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr_type</em>&nbsp;</td><td>: CVM_DIRECT_DATA, CVM_LINKED_DATA or CVM_GATHER_DATA. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Sum of buffer sizes for the addresses copied into local_ptr. </dd></dl>

<p>
Definition at line <a class="el" href="cvm-pci-dma_8h-source.html#l00364">364</a> of file <a class="el" href="cvm-pci-dma_8h-source.html">cvm-pci-dma.h</a>.
<p>
References <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203dbc9f9f8d6f0b8f000a38457bffc3ae0">CVM_DIRECT_DATA</a>, <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203006dd98b74edc3eee28a9010eebb4aee">CVM_GATHER_DATA</a>, <a class="el" href="cvm-pci_8h.html#451d7a5c26a37002543c86c9b82dd203a8c65cc198ef3870458ef9a1d753c73b">CVM_LINKED_DATA</a>, <a class="el" href="cvm-pci_8h-source.html#l00152">CVM_NULL_DATA</a>, <a class="el" href="unioncvmx__oct__pci__dma__local__ptr__t.html#457c896e400d4e9278be2a0615647c35">cvmx_oct_pci_dma_local_ptr_t::s</a>, <a class="el" href="cvm-pci-dma_8h-source.html#l00179">cvmx_oct_pci_dma_local_ptr_t::size</a>, and <a class="el" href="cvm-pci-dma_8h-source.html#l00172">cvmx_oct_pci_dma_local_ptr_t::u64</a>.
</div>
</div><p>
<a class="anchor" name="5ff9888036a38704dea0eabe5bca7119"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_dma_queue_init" ref="5ff9888036a38704dea0eabe5bca7119" args="(cvm_oct_dev_t *oct)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_dma_queue_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvm__oct__dev__t.html">cvm_oct_dev_t</a> *&nbsp;</td>
          <td class="paramname"> <em>oct</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: Initialize a PCI DMA instruction chunk. 
<p>
This routine allocates the first chunk for each DMA instruction queue and writes the chunk addr, maximum writeable space in chunk to CSR. It also allocates extra chunk for fast chaining. <dl compact><dt><b>Returns:</b></dt><dd>Success: 0; Failure: 1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="d4012d9761bbf54415803f7de1db32e0"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_drv_debug_print_dmaq" ref="d4012d9761bbf54415803f7de1db32e0" args="(int q_no)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvm_drv_debug_print_dmaq           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>q_no</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="af1a8951b180e97d8157d6c1d2032359"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_get_dma_comp_ptr" ref="af1a8951b180e97d8157d6c1d2032359" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcvm__dma__comp__ptr__t.html">cvm_dma_comp_ptr_t</a>* cvm_get_dma_comp_ptr           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: Function to get a completion pointer from core driver pool. 
<p>
The application would use the comp_byte in the structure as a completion word for PCI DMA. <dl compact><dt><b>Returns:</b></dt><dd>Success: Pointer to completion byte; Failure: NULL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="fc26a651709e499dc0fe7e390dddad81"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_pci_dma_dump_tracker_list" ref="fc26a651709e499dc0fe7e390dddad81" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvm_pci_dma_dump_tracker_list           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="44270257fe34f9e7490e249a3c2cb8cc"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_pci_dma_print_header" ref="44270257fe34f9e7490e249a3c2cb8cc" args="(cvmx_oct_pci_dma_inst_hdr_t *dmahdr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvm_pci_dma_print_header           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unioncvmx__oct__pci__dma__inst__hdr__t.html">cvmx_oct_pci_dma_inst_hdr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dmahdr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5c0b66f728ba7b188b56ffcf17ac96b8"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_pci_dma_raw" ref="5c0b66f728ba7b188b56ffcf17ac96b8" args="(cvmx_oct_pci_dma_inst_hdr_t *dma_hdr, cvmx_oct_pci_dma_local_ptr_t *lptr, cvm_dma_remote_ptr_t *rptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_pci_dma_raw           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unioncvmx__oct__pci__dma__inst__hdr__t.html">cvmx_oct_pci_dma_inst_hdr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dma_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvmx__oct__pci__dma__local__ptr__t.html">cvmx_oct_pci_dma_local_ptr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvm__dma__remote__ptr__t.html">cvm_dma_remote_ptr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: This routines creates a PCI DMA instruction based on information in the DMA header and local and remote pointers and buffer sizes passed to it. 
<p>
Applications have more control over the DMA operation when using this API. This function can be called for INBOUND &amp; OUTBOUND operations only for all variants of Octeon.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dma_hdr</em>&nbsp;</td><td>- the DMA instruction header. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lptr</em>&nbsp;</td><td>- list of local data pointers. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rptr</em>&nbsp;</td><td>- list of remote (host/peer) addresses. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success: 0; Failure: -ENOMEM, -EINVAL. </dd></dl>

<p>
Referenced by <a class="el" href="cvm-pci-dma_8h-source.html#l00531">cvm_pci_dma_send_direct()</a>.
</div>
</div><p>
<a class="anchor" name="4ebbf8a86fefe0238ae2a57c830cf09d"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_pci_dma_recv_data" ref="4ebbf8a86fefe0238ae2a57c830cf09d" args="(cvm_pci_dma_cmd_t *cmd, cvmx_buf_ptr_t *lptr, cvm_dma_remote_ptr_t *rptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_pci_dma_recv_data           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unioncvm__pci__dma__cmd__t.html">cvm_pci_dma_cmd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_buf_ptr_t *&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvm__dma__remote__ptr__t.html">cvm_dma_remote_ptr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: Read data from host or PCI-Express memory using Octeon PCI DMA engine. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cmd</em>&nbsp;</td><td>- describes the DMA operation. See <a class="el" href="unioncvm__pci__dma__cmd__t.html">cvm_pci_dma_cmd_t</a> for description of fields. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lptr</em>&nbsp;</td><td>- list of addresses in Octeon local memory (max 15). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rptr</em>&nbsp;</td><td>- list of addresses in host/PCI-E memory (max 15). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success: 0; Failure: -ENOMEM, -EINVAL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="bdb7e5a397efb3d22d7a0e16b367ce88"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_pci_dma_remove_from_tracker_list" ref="bdb7e5a397efb3d22d7a0e16b367ce88" args="(cvmx_wqe_t *wqe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvm_pci_dma_remove_from_tracker_list           </td>
          <td>(</td>
          <td class="paramtype">cvmx_wqe_t *&nbsp;</td>
          <td class="paramname"> <em>wqe</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="aedebf9d4cf969e2f017e822461a44e0"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_pci_dma_send_data" ref="aedebf9d4cf969e2f017e822461a44e0" args="(cvm_pci_dma_cmd_t *cmd, cvmx_buf_ptr_t *lptr, cvm_dma_remote_ptr_t *rptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_pci_dma_send_data           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unioncvm__pci__dma__cmd__t.html">cvm_pci_dma_cmd_t</a> *&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cvmx_buf_ptr_t *&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvm__dma__remote__ptr__t.html">cvm_dma_remote_ptr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: Write data to host or PCI-Express memory using Octeon PCI DMA engine. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cmd</em>&nbsp;</td><td>- describes the DMA operation. See <a class="el" href="unioncvm__pci__dma__cmd__t.html">cvm_pci_dma_cmd_t</a> for description of fields. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lptr</em>&nbsp;</td><td>- list of addresses in Octeon local memory (max 15). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rptr</em>&nbsp;</td><td>- list of addresses in host/PCI-E memory (max 15). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success: 0; Failure: -ENOMEM, -EINVAL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="06a3a35352277e1f4735eea19d79c1a1"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_pci_dma_send_direct" ref="06a3a35352277e1f4735eea19d79c1a1" args="(cvmx_oct_pci_dma_inst_hdr_t *dma_hdr, cvmx_oct_pci_dma_local_ptr_t *lptr, cvm_dma_remote_ptr_t *rptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvm_pci_dma_send_direct           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unioncvmx__oct__pci__dma__inst__hdr__t.html">cvmx_oct_pci_dma_inst_hdr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dma_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvmx__oct__pci__dma__local__ptr__t.html">cvmx_oct_pci_dma_local_ptr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>lptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvm__dma__remote__ptr__t.html">cvm_dma_remote_ptr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: Wrapper around the <a class="el" href="cvm-pci-dma_8h.html#5c0b66f728ba7b188b56ffcf17ac96b8">cvm_pci_dma_raw()</a> function. 
<p>
<a class="el" href="cvm-pci-dma_8h.html#06a3a35352277e1f4735eea19d79c1a1">cvm_pci_dma_send_direct()</a> existed in older releases and may be removed in the future. 
<p>
Definition at line <a class="el" href="cvm-pci-dma_8h-source.html#l00531">531</a> of file <a class="el" href="cvm-pci-dma_8h-source.html">cvm-pci-dma.h</a>.
<p>
References <a class="el" href="cvm-pci-dma_8h.html#5c0b66f728ba7b188b56ffcf17ac96b8">cvm_pci_dma_raw()</a>.
</div>
</div><p>
<a class="anchor" name="15a10874918a536205a8fa633b4037ec"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_pcie_dma_raw" ref="15a10874918a536205a8fa633b4037ec" args="(int q_no, cvmx_oct_pci_dma_inst_hdr_t *dma_hdr, void *firstptrs, void *lastptrs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvm_pcie_dma_raw           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>q_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvmx__oct__pci__dma__inst__hdr__t.html">cvmx_oct_pci_dma_inst_hdr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>dma_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>firstptrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>lastptrs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: This routines creates a PCI DMA instruction based on information in the DMA header and local and remote pointers and buffer sizes passed to it. 
<p>
Applications have more control over the DMA operation when using this API. This function can be called for INBOUND &amp; OUTBOUND operations. For CN56XX &amp; CN63xx, an application can also achieve INTERNAL-ONLY or EXTERNAL-ONLY operations using this API. Based on the DMA type specified, the firstptrs and lastptrs will be interpreted differently. In all cases, the pointers from the firstptrs list will be copied into the DMA instruction chunk, followed by the pointers in the lastptrs list.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q_no</em>&nbsp;</td><td>- The PCI DMA queue to use for this DMA operation. The DMA instruction header does not have a field for the queue to be used. So this is passed separately for CN56XX &amp; CN63XX. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dma_hdr</em>&nbsp;</td><td>- the DMA instruction header. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>firstptrs</em>&nbsp;</td><td>- first set of pointers. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lastptrs</em>&nbsp;</td><td>- second set of pointers. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Success: 0; Failure: -ENOMEM, -EINVAL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="8c8ff553e3374fda08d688617be3dfb2"></a><!-- doxytag: member="cvm-pci-dma.h::cvm_release_dma_comp_ptr" ref="8c8ff553e3374fda08d688617be3dfb2" args="(cvm_dma_comp_ptr_t *ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvm_release_dma_comp_ptr           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvm__dma__comp__ptr__t.html">cvm_dma_comp_ptr_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ptr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Core: Function to free completion pointer to core driver pool. 
<p>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Tue Nov 22 15:40:59 2011 for Octeon PCI Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
